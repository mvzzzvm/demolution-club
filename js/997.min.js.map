{"version":3,"file":"997.min.js","mappings":"+IAKO,SAASA,IAEd,MACMC,EAAiBC,SAASC,cADf,oBAEjB,IAAIF,EAAgB,OAEpB,MAAMG,EAA4B,CAChCC,QAAS,CAAC,MACVC,MAAM,EACNC,YAAY,EACZC,gBAAgB,EAChBC,MAAO,IACPC,UAAU,EACVC,gBAAgB,EAChBC,gBAAgB,EAChBC,sBAAsB,EACtBC,WAAY,CACVC,OAAQ,uCACRC,OAAQ,yCAGNC,EAAYf,SAASC,cAAc,uBAKnCe,EAAa,KADSD,EAAUE,YAHb,IAG8C,IAAM,EACnCC,KAAKC,IAFjC,GAE6C,GACrDC,EAAU,MACVC,GAAW,IACXC,EAAe,WAEbtB,SAASuB,KAAKN,YAAc,MAC5BO,KAAKC,OAAOC,eAAeC,KAAKC,UAAY,EAAE,EAAIZ,IAAcI,EAASC,GACzEG,KAAKC,OAAOC,eAAeG,KAAKD,UAAY,CAACZ,IAAcI,EAASC,KAGtES,EAAsB,CAC1B3B,QAAS,CAAC,KAAY,MACtB4B,aAAc,EACdC,OAAQ,WACRN,eAAgB,CACdO,aAAa,EACbN,KAAM,CACJC,UAAW,CAAC,QAASR,EAASC,IAEhCQ,KAAM,CACJD,UAAW,CAAC,OAAQR,EAASC,KAGjCa,GAAI,CACFpC,KAAMwB,EACNa,OAAQb,IAGNc,EAAqB,CACzBC,cAAe,EACfC,aAAc,GACdC,YAAY,EACZD,aAAc,GACdE,YAAa,CACX,IAAK,CACHF,aAAc,GACdC,YAAY,KAIlB,IAAIE,EACAC,EACJ,SAASP,IAGJQ,OAAOC,WAFC,MAGLF,GAAaA,GAHR,MAGyBG,IAC1BF,OAAOC,WAHN,MAILF,GAAaA,GAJR,KAI2BA,EAL3B,MAK2CG,MAEhDH,GAAaA,EANR,MAWXI,EAAO,IAAI5C,KAA8B4B,IAHzCY,EAAYC,OAAOC,WAKrB,SAASC,IACPC,EAAO,IAAI5C,KAA8BkC,IAE3C,SAASU,EAAOC,GAEVN,GACFA,EAAaO,SAAQ,GAAM,GAE7BP,EAAe,IAAI,KAAO1C,EAAgBgD,GAO5CZ,IACAQ,OAAOM,iBAAiB,UAAU,QAASd,EAAQ","sources":["webpack://webdev/./src/js/modules/reviews-swiper.js"],"sourcesContent":["import Swiper, { Navigation, EffectCreative } from \"swiper\";\r\nimport { debounce } from './functions.js'\r\n// import \"swiper/css/effect-creative\";\r\n// import \"swiper/css\";\r\n\r\nexport function init(){\r\n  // console.log('initReviewSlider()')\r\n  const selector = \".reviews__slider\"\r\n  const reviewSliderEl = document.querySelector(selector);\r\n  if(!reviewSliderEl) return \r\n  // swiper lazy loading doesn't work with creativeEffect\r\n  const reviewSliderCommonOptions = {\r\n    modules: [Navigation],\r\n    loop: true,\r\n    grabCursor: true,\r\n    allowTouchMove: true,\r\n    speed: 600,\r\n    observer: true,\r\n    observeParents: true,\r\n    resizeObserver: false, // otherwise resize will fire only on smaller window sizes\r\n    updateOnWindowResize: true,\r\n    navigation: {\r\n      nextEl: \".reviews__slider .swiper-button-next\",\r\n      prevEl: \".reviews__slider .swiper-button-prev\",\r\n    },\r\n  };\r\n  const container = document.querySelector(\".reviews__container\")\r\n  const activeSlideWidth = 560\r\n  // const scale = 440 / activeSlideWidth\r\n  const scale = 1\r\n  const getFreeSpace = () => (container.clientWidth - activeSlideWidth + 60) / 2\r\n  const getXOffset = () => getFreeSpace() * Math.pow(scale, -1)\r\n  const yOffset = '15%'\r\n  const zOffset = -100\r\n  const beforeResize = function () {\r\n      // console.log('getXOffset', getXOffset())\r\n      if (document.body.clientWidth > 960) {\r\n          this.params.creativeEffect.prev.translate = [-1 * getXOffset(), yOffset, zOffset]\r\n          this.params.creativeEffect.next.translate = [getXOffset(), yOffset, zOffset]\r\n      }\r\n  }\r\n  const reviewSliderOptions = {\r\n    modules: [Navigation, EffectCreative],\r\n    loopedSlides: 2,\r\n    effect: \"creative\",\r\n    creativeEffect: {\r\n      perspective: true,\r\n      prev: {\r\n        translate: [\"-100%\", yOffset, zOffset],\r\n      },\r\n      next: {\r\n        translate: [\"100%\", yOffset, zOffset],\r\n      },\r\n    },\r\n    on: {\r\n      init: beforeResize,\r\n      resize: beforeResize\r\n    }\r\n  };\r\n  const smallSliderOptions = {\r\n    slidesPerView: 1,\r\n    spaceBetween: 50,\r\n    autoHeight: true,\r\n    spaceBetween: 10,\r\n    breakpoints: {\r\n      480: {\r\n        spaceBetween: 50,\r\n        autoHeight: false\r\n      },\r\n    }\r\n  };\r\n  let reviewSlider;\r\n  let prevWidth = undefined;\r\n  function resize() {\r\n    const w1 = 480\r\n    const w2 = 769\r\n    if(window.innerWidth < w1) {\r\n      if(!prevWidth || prevWidth >= w1) reinitSmall()\r\n    } else if(window.innerWidth < w2) {\r\n      if(!prevWidth || prevWidth >= w2 || prevWidth < w1) reinitSmall()\r\n    } else {\r\n      if(!prevWidth || prevWidth < w2) reinitLarge()\r\n    }\r\n    prevWidth = window.innerWidth\r\n  }\r\n  function reinitLarge(){\r\n    reinit({...reviewSliderCommonOptions, ...reviewSliderOptions})\r\n  }\r\n  function reinitSmall() {\r\n    reinit({...reviewSliderCommonOptions, ...smallSliderOptions})\r\n  }\r\n  function reinit(options) {\r\n    // console.log('reinit', prevWidth, ' -> ', window.innerWidth)\r\n    if (reviewSlider) {\r\n      reviewSlider.destroy(true, true);\r\n    }\r\n    reviewSlider = new Swiper(reviewSliderEl, options);\r\n  }\r\n  // new LazyLoad({\r\n  //   elements_selector: selector,\r\n  //   unobserve_entered: false,\r\n  //   callback_enter: resize\r\n  // })\r\n  resize()\r\n  window.addEventListener(\"resize\", debounce(resize, 200));\r\n}\r\n"],"names":["init","reviewSliderEl","document","querySelector","reviewSliderCommonOptions","modules","loop","grabCursor","allowTouchMove","speed","observer","observeParents","resizeObserver","updateOnWindowResize","navigation","nextEl","prevEl","container","getXOffset","clientWidth","Math","pow","yOffset","zOffset","beforeResize","body","this","params","creativeEffect","prev","translate","next","reviewSliderOptions","loopedSlides","effect","perspective","on","resize","smallSliderOptions","slidesPerView","spaceBetween","autoHeight","breakpoints","reviewSlider","prevWidth","window","innerWidth","reinitSmall","reinit","options","destroy","addEventListener"],"sourceRoot":""}